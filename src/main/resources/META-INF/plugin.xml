<idea-plugin require-restart="false" allow-bundled-update="true">
    <id>cn.boz.jb.plugin.spd-editor</id>
    <name>Erayt Spd Editor</name>
    <vendor email="1173626291@qq.com" url="http://blog.csdn.net/blueboz">Blueboz.Chen</vendor>

    <description><![CDATA[
    This is an spd editor plugin,which support features such as flow viewer,Flow editor,flow image export,flow save and so on.
    <br>
     <b>1.Use this plugin start with right key on the project file or directory</b><br>
     <b>2.New->Spd File.</b><br>
     <b>3.Input any filename that you want.</b><br>
    ]]></description>
    <version>1.0.0</version>
    <change-notes>
    </change-notes>

    <!-- please see https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html
         on how to target different products -->
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.platform</depends>
    <depends>JavaScript</depends>
    <!--    <depends>com.intellij.modules.java-capable</depends>-->
    <depends>com.intellij.java</depends>
    <depends>com.intellij.database</depends>
    <depends>Git4Idea</depends>
    <!--    <depends>JavaScriptLanguage</depends>-->



    <extensions defaultExtensionNs="com.intellij">
        <internalFileTemplate name="Spd Process"/>
        <!-- Add your extensions here -->
        <fileEditorProvider implementation="cn.boz.jb.plugin.idea.fileeditor.SpdFileEditorProvider"
                            id="myFileEditorProvider" order="last">
        </fileEditorProvider>
        <toolWindow factoryClass="cn.boz.jb.plugin.idea.toolwindow.EcasMenuToolWindowFactory" id="EcasMenu"
                    anchor="right"
                    order="last" icon="SpdEditorIcons.MENU_16_ICON"/>
        <fileType name="Spd" extensions="spd"
                  implementationClass="cn.boz.jb.plugin.idea.filetype.SpdFileType" language="XML" fieldName="INSTANCE"/>
        <themeMetadataProvider path="/META-INF/SpdEditor.themeMetadata.json"/>
        <projectService serviceImplementation="cn.boz.jb.plugin.idea.configurable.SpdEditorDBState"/>
        <projectService serviceImplementation="cn.boz.jb.plugin.idea.configurable.SpdEditorNormState"/>
        <!--项目领域的数据库配置信息-->

        <applicationConfigurable parentId="tools" instance="cn.boz.jb.plugin.idea.configurable.SpdEditorDBSettings"
                                 id="spdEditorConfigurable" displayName="SpdEditor" nonDefaultProject="true"/>
        <applicationConfigurable parentId="spdEditorConfigurable"
                                 instance="cn.boz.jb.plugin.idea.configurable.SpdEditorNormSettings"
                                 id="spdEditorConfigurableConfig" displayName="BasicConfig" nonDefaultProject="true"/>
        <notificationGroup id="Spd Editor" displayType="BALLOON" />
        <notification.group shortTitle="SpdNotify" groupId="SpdNotify" id="SpdNotify" ></notification.group>
        <!--        <searchEverywhereContributor implementation="cn.boz.jb.plugin.idea.widget.SpdEditor" id="searchSpdFlow" order="last" os="freebsd"></searchEverywhereContributor>-->
        <projectService serviceImplementation="cn.boz.jb.plugin.idea.notification.SpdEditorNotification" />
    </extensions>

    <actions>
        <!-- Add your actions here -->
        <group>
            <action class="cn.boz.jb.plugin.addbom.RemoveBomAction" id="removeBomAction" description="Remove UTF-8 BOM"
                    text="DelBom"
                    icon="SpdEditorIcons.BOM_16_ICON">
            </action>
            <action class="cn.boz.jb.plugin.addbom.AddBomAction" id="addBomAction" description="Add UTF-8 BOM"
                    text="AddBom"
                    icon="SpdEditorIcons.BOM_16_ICON">
            </action>
            <action class="cn.boz.jb.plugin.idea.action.HtmlRefAction" id="htmlRefAction" description="check who refer me in ecas menu"
                    text="HtmlRef">
            </action>
            <action class="cn.boz.jb.plugin.addbom.FileDiffHistoryAction" id="myfileDiffAction"
                    description="FileDiffHistory"
                    text="Spd File Diff"
                    icon="SpdEditorIcons.FLOW_16_ICON">
            </action>

            <add-to-group group-id="ProjectViewPopupMenu" anchor="before"
                          relative-to-action="EditorPaste"/>

        </group>

        <action class="cn.boz.jb.plugin.idea.action.GotoProcessAction" id="goToProcessAction"
                description="Go To Process"
                text="Go To Process"
                icon="DvcsImplIcons.Outgoing">
        </action>

        <group id="spdEditorPopupGroup">
            <group popup="true" text="WhoCallMe" icon="AllIcons.General.User">
                <action class="cn.boz.jb.plugin.idea.action.WhoCallMeCodeActionGroup$WhoCallMeCodeAction"
                        id="WhoCallMeCodeAction" text="Code" icon="SpdEditorIcons.CODE_16_ICON"></action>
                <action class="cn.boz.jb.plugin.idea.action.WhoCallMeCodeActionGroup$WhoCallMeDBAction"
                        id="WhoCallMeDbAction" text="DB" icon="SpdEditorIcons.DATABASE_16_ICON"></action>

            </group>
            <group text="Db Diff" icon="AllIcons.Diff.Compare4LeftRight" popup="true">
                <action class="cn.boz.jb.plugin.idea.action.SpdDbDiffGroup$SpdDbDiffKeepWrapAction"
                        description="SQLDiff"
                        text="Keep Wrap"
                        icon="AllIcons.Actions.ToggleSoftWrap">
                </action>
                <action class="cn.boz.jb.plugin.idea.action.SpdDbDiffGroup$SpdDbDiffRemoveWrapAction"
                        description="SQLDiff"
                        text="Remove Wrap"
                        icon="AllIcons.Actions.ListFiles">
                </action>
            </group>

            <group text="Who I Call" icon="DvcsImplIcons.Outgoing" id="goToProcessGroup" description="Go To Process"
                   popup="true"
                   class="cn.boz.jb.plugin.idea.action.GotoProcessActionGroup">
                <action class="cn.boz.jb.plugin.idea.action.GotoProcessSearchAction" id="goToProcessSearchAction"
                        description="Go To Process Search"
                        text="Search"
                        icon="AllIcons.Actions.Search">
                </action>
                <action class="cn.boz.jb.plugin.idea.action.GotoProcessFindAction" id="goToProcessFindAction"
                        description="Go To Process Find"
                        text="Find"
                        icon="AllIcons.Actions.Search">
                </action>
            </group>
            <action class="cn.boz.jb.plugin.idea.action.FindInSpdEditor" icon="AllIcons.Actions.Find"
                    id="FindInSpdEditor" text="FindInSpdEditor"></action>

            <action class="cn.boz.jb.plugin.idea.action.GotoServiceTaskAction" id="gotoServiceTaskAction"
                    description="Go To ServiceTask"
                    text="Go To ServiceTask"
                    icon="AllIcons.Actions.ListFiles"
            />
            <action class="cn.boz.jb.plugin.idea.action.GotoRightAction" id="gotoRightAction"
                    description="Go To EngineRight"
                    text="Go To EngineRight"
                    icon="AllIcons.Nodes.SecurityRole"/>
        </group>

        <action class="cn.boz.jb.plugin.idea.action.NewSpdFileAction" id="NewSpdFile" text="Spd File"
                icon="SpdEditorIcons.FLOW_16_ICON" description="Spd File">
            <add-to-group group-id="NewGroup" anchor="last"/>
        </action>

        <group>
            <group class="cn.boz.jb.plugin.idea.action.JsUsageGroup" text="JavaScript Usage" icon="SpdEditorIcons.JAVASCRIPT_16_ICON" popup="true">
                <action class="cn.boz.jb.plugin.idea.action.JsUsageGroup$JsUsageFindAction" id="FindJsUsage"
                        text="JavaScript Usage" icon="SpdEditorIcons.SEARCH_ITEM_16_ICON"></action>
                <action class="cn.boz.jb.plugin.idea.action.JsUsageGroup$JsUsageAction" id="ReferJsUsage"
                        text="JavaScript Usage" icon="SpdEditorIcons.REFER_16_ICON">
                </action>
            </group>

            <action class="cn.boz.jb.plugin.idea.action.GoToRefFile" id="GoToRef" text="Go To Ref"
                    icon="SpdEditorIcons.REF_16_ICON">
            </action>
            <group text="GoToAction" id="GoToActionGroup" popup="true">
                <action class="cn.boz.jb.plugin.idea.action.GoToAnyRefAction" icon="AllIcons.Actions.Search"
                        id="GoToRefAction"
                        text="GoToAnyRefAction"></action>
                <action class="cn.boz.jb.plugin.idea.action.GoToAnyRefExtAction" icon="AllIcons.Actions.Search"
                        text="GoToRefExt" id="GoToRefExt"></action>
            </group>
            <!--            <action class="cn.boz.jb.plugin.idea.codedef.action.AddCodeDefAction" id="AddCodeDef" text="Add Code Def"-->
            <!--                    icon="AllIcons.General.Add"></action>-->

            <add-to-group group-id="EditorPopupMenu" anchor="first"></add-to-group>
        </group>
        <!--        GoToJsFile-->

        <group id="spd.gotorefaction.group">
            <action class="cn.boz.jb.plugin.idea.action.GoToRefFile$SearchIdAction" icon="AllIcons.Actions.Find"
                    id="GotoIdAction" text="SearchId"></action>
        </group>

        <!--查看EngineAction 对话框中，功能菜单-->
        <group id="spd.engineaction.dlg.group">
            <action class="cn.boz.jb.plugin.idea.dialog.GotoScriptAction" id="gotoscriptaction" text="gotoscript"
                    icon="AllIcons.Actions.ShowCode">
            </action>
        </group>
        <group id="spd.menuid.spanel.group">
            <action class="cn.boz.jb.plugin.idea.toolwindow.PrevPageAction" icon="AllIcons.Actions.Play_back"></action>
            <!--            <action class="cn.boz.jb.plugin.idea.toolwindow.PageRangeAction" icon="AllIcons.Actions.FindAndShowNextMatches"></action>-->
            <action class="cn.boz.jb.plugin.idea.toolwindow.NextPageAction"
                    icon="AllIcons.Actions.Play_forward"></action>
        </group>

        <!--        <action class="cn.boz.jb.plugin.idea.action.ChangeViewAction" icon="SpdEditorIcons.FLOW_16_ICON" text="changeView" id="spdchangeview">-->

        <!--            <add-to-group group-id="ChangesView.GroupBy"/>-->

        <!--            <add-to-group group-id="ChangesBrowser"></add-to-group>-->
        <!--        </action>-->
        <action class="cn.boz.jb.plugin.idea.action.FileHistoryDiffAction" icon="SpdEditorIcons.FLOW_16_ICON"
                text="Spd Compare" id="FileHistoryDiff" description="SpdDiff">
            <add-to-group group-id="Vcs.FileHistory.ContextMenu"></add-to-group>
            <!--            <add-to-group group-id="ChangesBrowser"></add-to-group>-->
            <!--            <add-to-group group-id="ChangesView.GroupBy"/>-->
        </action>

        <group>

            <action class="cn.boz.jb.plugin.idea.action.GitGetAction" text="GitGet" id="GitGet"
                    icon="AllIcons.Vcs.ShelveSilent"></action>
            <add-to-group group-id="VcsHistoryInternalGroup.Popup"></add-to-group>
            <add-to-group group-id="Vcs.RepositoryChangesBrowserMenu"></add-to-group>
            <add-to-group group-id="VcsSelectionHistoryDialog.Popup"></add-to-group>
        </group>
        <group>

            <action class="cn.boz.jb.plugin.idea.action.RepositoryChangeDiffAction" icon="SpdEditorIcons.FLOW_16_ICON"
                    text="RepositoryChangeDiff" id="RepoChangeSpdCompare" description="SpdDiff">
            </action>
            <add-to-group group-id="VcsHistoryInternalGroup.Popup"></add-to-group>
            <add-to-group group-id="ChangesViewPopupMenu"></add-to-group>
            <add-to-group group-id="Vcs.RepositoryChangesBrowserMenu"></add-to-group>
            <add-to-group group-id="VcsSelectionHistoryDialog.Popup"></add-to-group>
        </group>

        <group>
            <action class="cn.boz.jb.plugin.idea.action.SpdCommitDiffAction" text="SpdCommitDiff"
                    id="SpdCommitDiff" icon="SpdEditorIcons.FLOW_16_ICON"/>
            <action class="cn.boz.jb.plugin.idea.action.ExportAsZipAction" icon="SpdEditorIcons.ZIP_16_ICON"
                    text="ExportAsZip"></action>
            <action class="cn.boz.jb.plugin.idea.action.ExportAllSpdSql"
                    text="ExportAsSQL"></action>
            <add-to-group group-id="ChangesViewPopupMenu"></add-to-group>
        </group>

        <group>
            <group popup="true" text="FmsTools">
                <action class="cn.boz.jb.plugin.idea.action.fmss.GoToClientSyncBase"
                        id="ClientSyncBase" text="ClientSyncBase"></action>
            </group>
            <add-to-group group-id="MainMenu"></add-to-group>
            <add-to-group group-id="HelpMenu"></add-to-group>
        </group>

    </actions>



</idea-plugin>